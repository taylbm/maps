(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6499)}])},6499:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var a=n(7568),r=n(1799),i=n(7582),o=n(5893),s=n(7294),l=n(5134),c=n(795),u=n(1405),d=n(4510),x=n(3856),m=n(1806),h=function(e){var t,n=e.band,a=e.data.value;if(!a||!a.climate)return"loading...";var r=a.climate.filter((function(e){return 9969209968386869e21!==e}));if(0===r.length)t="no data in region";else{var i=r.reduce((function(e,t){return e+t}),0)/r.length;t="prec"===n?"Average: ".concat(i.toFixed(2)):"Average: ".concat(i.toFixed(2),"\xbaC")}return(0,o.jsx)(c.xu,{sx:{ml:[2],mt:["-1px"],fontFamily:"mono",letterSpacing:"mono",textTransform:"uppercase"},children:t})},p=function(e){var t=e.band,n=e.month,a=e.regionData,r=e.showRegionPicker,i=e.setShowRegionPicker,s=(0,d.Ng)().recenterRegion;return(0,o.jsxs)(c.xu,{sx:{display:["none","none","flex","flex"],alignItems:"center",position:"absolute",color:"primary",left:[13],bottom:[17,17,15,15]},children:[(0,o.jsxs)(c.hU,{"aria-label":"Circle filter",onClick:function(){return i(!r)},sx:{stroke:"primary",cursor:"pointer",width:34,height:34},children:[!r&&(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"34",height:"34",strokeWidth:"1.75",fill:"none",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,o.jsx)("circle",{cx:"10",cy:"10",r:"3"}),(0,o.jsx)("line",{x1:"12",x2:"17",y1:"12",y2:"17"})]}),r&&(0,o.jsx)(m.a2,{sx:{strokeWidth:1.75,width:24,height:24}})]}),r&&(0,o.jsx)(c.hU,{"aria-label":"Recenter map",onClick:s,sx:{stroke:"primary",cursor:"pointer",width:34,height:34},children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"34",height:"34",strokeWidth:"1.75",fill:"none",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,o.jsx)("circle",{cx:"12",cy:"12",r:"2"})]})}),r&&(0,o.jsx)(h,{data:a,band:t,month:n})]})},f=n(9396),g={label:{fontFamily:"mono",letterSpacing:"mono",textTransform:"uppercase",fontSize:[1,1,1,2],mt:[3]}},b={tavg:{max:30,min:-20},prec:{max:300,min:0},precip_tms_denied_no:{max:1,min:-1},precip_tms_denied_yes:{max:1,min:-1},tms_swath:{max:.5,min:0},0:{max:1,min:-1},1:{max:1,min:-1}},S={tavg:"warm",prec:"cool",precip_tms_denied_yes:"rainbow",precip_tms_denied_no:"rainbow",tms_swath:"wind",0:"rainbow",1:"rainbow"},v=function(e){var t=e.getters,n=e.setters,a=(t.display,t.debug,t.opacity,t.clim,t.month,t.band,t.colormapName,t.showSwath),i=(t.showTMSDataDenialDifference,t.showTMSIncluded,t.showTMSDenied,t.year),l=t.dateMonth,d=t.day,x=t.hour,m=t.minute,h=t.isPlaying,p=t.viewMode,v=t.VIEW_MODES,w=t.animationSpeed,y=(n.setDisplay,n.setDebug,n.setOpacity,n.setClim),j=(n.setMonth,n.setBand),D=n.setColormapName,C=n.setShowSwath,_=n.setViewMode,T=n.setYear,M=n.setDateMonth,F=n.setDay,I=n.setHour,k=n.setMinute,E=n.setIsPlaying,U=n.setCurrentFrame,z=n.setAnimationBaseDate,R=n.resetAnimation,N=n.setAnimationSpeed;(0,s.useCallback)((function(e){var t=e.target.value;j(parseInt(t)),y([b[t].min,b[t].max]),D(S[t])}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.xu,{sx:{position:"absolute",top:20,right:20},children:(0,o.jsxs)(c.kC,{sx:{flexDirection:"column",alignItems:"flex-end",gap:4},children:[(0,o.jsxs)(c.xu,{children:[(0,o.jsx)(c.xu,{sx:(0,f.Z)((0,r.Z)({},g.label),{mt:[0]}),children:"TMS Swath"}),(0,o.jsx)(u.ZD,{sx:{display:"block",float:"right",mt:[2]},value:a,onClick:function(){R(),C((function(e){return!e}))}})]}),(0,o.jsxs)(c.xu,{children:[(0,o.jsx)(c.xu,{sx:(0,f.Z)((0,r.Z)({},g.label),{mt:[0]}),children:"TMS Data Layer"}),(0,o.jsxs)(u.Ph,{sx:{display:"block",float:"right",mt:[2],minWidth:"180px"},value:p,onChange:function(e){R(),_(e.target.value);var t=new Date;t.setUTCHours(t.getUTCHours()-14),t.setUTCMinutes(0,0,0),setTimeout((function(){z(t),U(0),E(!0),T(String(t.getUTCFullYear())),M(String(t.getUTCMonth()+1).padStart(2,"0")),F(String(t.getUTCDate()).padStart(2,"0")),I(String(t.getUTCHours()).padStart(2,"0")),k("00")}),100)},children:[(0,o.jsx)("option",{value:v.NONE,children:"None"}),(0,o.jsx)("option",{value:v.TMS_DIFFERENCE,children:"TMS Data Denial Difference"}),(0,o.jsx)("option",{value:v.TMS_INCLUDED,children:"TMS Included"})]})]})]})}),(0,o.jsxs)(c.xu,{sx:{position:"absolute",top:20,left:20},children:[(0,o.jsx)(c.xu,{sx:(0,f.Z)((0,r.Z)({},g.label),{mt:[4]}),children:"Date & Time (UTC)"}),(0,o.jsxs)(c.kC,{sx:{gap:2,alignItems:"center"},children:[(0,o.jsxs)(c.xu,{children:[(0,o.jsx)(c.__,{sx:g.label,htmlFor:"year",children:"Year"}),(0,o.jsx)(c.II,{id:"year",type:"number",value:i,onChange:function(e){return T(e.target.value)},sx:{width:"70px"}})]}),(0,o.jsxs)(c.xu,{children:[(0,o.jsx)(c.__,{sx:g.label,htmlFor:"dateMonth",children:"Month"}),(0,o.jsx)(c.II,{id:"dateMonth",type:"number",value:l,onChange:function(e){return M(e.target.value)},sx:{width:"50px"}})]}),(0,o.jsxs)(c.xu,{children:[(0,o.jsx)(c.__,{sx:g.label,htmlFor:"day",children:"Day"}),(0,o.jsx)(c.II,{id:"day",type:"number",value:d,onChange:function(e){return F(e.target.value)},sx:{width:"50px"}})]}),(0,o.jsxs)(c.xu,{children:[(0,o.jsx)(c.__,{sx:g.label,htmlFor:"hour",children:"Hour"}),(0,o.jsx)(c.II,{id:"hour",type:"number",value:x,onChange:function(e){return I(e.target.value)},sx:{width:"50px"}})]}),(0,o.jsxs)(c.xu,{children:[(0,o.jsx)(c.__,{sx:g.label,htmlFor:"minute",children:"Minute"}),(0,o.jsx)(c.II,{id:"minute",type:"text",value:"00",disabled:!0,sx:{width:"50px",opacity:.6,cursor:"not-allowed",bg:"muted"}})]})]}),(0,o.jsx)(c.xu,{sx:(0,f.Z)((0,r.Z)({},g.label),{mt:[4]}),children:"Animation"}),(0,o.jsxs)(c.kC,{sx:{gap:2,flexDirection:"column"},children:[(0,o.jsx)(c.kC,{sx:{gap:2},children:h?(0,o.jsx)(c.zx,{onClick:function(){E(!1)},sx:{py:2,px:3,fontSize:2,bg:"#FFFF00",color:"black","&:hover":{bg:"#FFD700"}},children:"Pause"}):(0,o.jsx)(c.zx,{onClick:function(){var e=new Date(parseInt(i),parseInt(l)-1,parseInt(d),parseInt(x),parseInt(m));z(e),U(0),E(!0)},sx:{py:2,px:3,fontSize:2,bg:"#FFFF00",color:"black","&:hover":{bg:"#FFD700"}},children:"Play"})}),(0,o.jsxs)(c.xu,{sx:{mt:2},children:[(0,o.jsx)(c.xu,{sx:(0,f.Z)((0,r.Z)({},g.label),{fontSize:[0,0,0,1],mt:[1]}),children:"Speed (ms between frames)"}),(0,o.jsxs)(c.kC,{sx:{alignItems:"center"},children:[(0,o.jsx)(u.iR,{min:100,max:3e3,step:100,sx:{width:"175px",display:"inline-block"},value:w,onChange:function(e){return N(parseInt(e.target.value))}}),(0,o.jsx)(u.Ct,{sx:{bg:"primary",color:"background",display:"inline-block",fontSize:[1,1,1,2],height:["21px","21px","21px","23px"],position:"relative",left:[3],top:["3px"]},children:w})]}),(0,o.jsxs)(c.kC,{sx:{justifyContent:"space-between",fontSize:0,color:"secondary",mt:1},children:[(0,o.jsx)(c.xv,{children:"Fast"}),(0,o.jsx)(c.xv,{children:"Slow"})]})]})]})]})]})},w=function(e){var t=e.onLogin,n=(0,s.useState)(""),a=n[0],r=n[1];return(0,o.jsx)(c.xu,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:3,bg:"muted"},children:(0,o.jsxs)(c.xu,{as:"form",onSubmit:function(e){e.preventDefault(),t(a)},sx:{p:4,bg:"background",borderRadius:"small",boxShadow:"0 0 8px rgba(0,0,0,0.125)",width:"300px",display:"flex",flexDirection:"column",gap:3},children:[(0,o.jsx)(c.__,{htmlFor:"password",sx:{fontSize:3,fontWeight:"bold"},children:"Password"}),(0,o.jsx)(c.II,{type:"password",id:"password",value:a,onChange:function(e){return r(e.target.value)},sx:{p:2,fontSize:2}}),(0,o.jsx)(c.zx,{type:"submit",sx:{p:2,fontSize:2,fontWeight:"bold",bg:"#FFFF00",color:"black","&:hover":{bg:"#FFD700"}},children:"Login"})]})})},y=n(1163),j="https://carbonplan-maps.s3.us-west-2.amazonaws.com/",D={NONE:"none",TMS_DIFFERENCE:"tms_difference",TMS_INCLUDED:"tms_included",TMS_DENIED:"tms_denied"},C=function(e){var t=new Date(e.getTime());return t.setUTCMinutes(0,0,0),t},_=function(e,t,n,a,r){var i="".concat(e,"/").concat(t,"/").concat(n),o="".concat(a),s="".concat(e).concat(t).concat(n,"_").concat(a).concat(r,"Z.zarrpyramid");return"https://tmrwwxappspuma.blob.core.windows.net/prod-chimp-inference-viz/GOES_EAST_FD/".concat(i,"/").concat(o,"/").concat(s)},T=function(e){try{if(!e)return null;var t=new Date(e);return isNaN(t.getTime())?(console.warn("Invalid date format: ".concat(e)),null):t}catch(n){return console.warn("Error parsing date parameter:",n,e),null}},M=function(e){e.colormap;var t=e.clim,n=e.label,a=e.units,i=e.type,s=void 0===i?"linear":i,u=e.sx,d=void 0===u?{}:u,x=((0,l.B7)().theme,function(e){return Math.abs(e)<.1?e.toFixed(2):Math.abs(e)<1?e.toFixed(1):Math.round(e)}),m=function(){var e={"TMS Data Denial Difference":{type:"diverging",colors:["#0571b0","#f7f7f7","#ca0020"]},"TMS Included":{type:"sequential",colors:["#6e40aa","#4c6edb","#23abd8","#1ddfa3","#52f667","#aff05b","#e2b72f","#ff7847","#fe4b83","#be3caf"]},"TMS Denied":{type:"sequential",colors:["#6e40aa","#4c6edb","#23abd8","#1ddfa3","#52f667","#aff05b","#e2b72f","#ff7847","#fe4b83","#be3caf"]}};return e[n]||("diverging"===s?e["TMS Data Denial Difference"]:e["TMS Included"])}();"TMS Included"!==n&&"TMS Denied"!==n||(m.colors=["#6e40aa","#4c6edb","#23abd8","#1ddfa3","#52f667","#aff05b","#e2b72f","#ff7847","#fe4b83","#be3caf"]);return(0,o.jsxs)(c.xu,{sx:(0,r.Z)({position:"absolute",bottom:[60,60,80,80],left:20,bg:"background",p:2,borderRadius:"small",minWidth:"180px",border:"1px solid",borderColor:"muted",fontSize:[0,0,1,1],zIndex:1e3,opacity:.9},d),children:[(0,o.jsx)(c.xv,{sx:{fontWeight:"bold",mb:1,color:"primary"},children:n}),(0,o.jsxs)(c.kC,{sx:{alignItems:"center",justifyContent:"space-between",mb:1},children:[(0,o.jsx)(c.xv,{children:x(t[0])}),(0,o.jsx)(c.xv,{sx:{textAlign:"center"},children:a}),(0,o.jsx)(c.xv,{children:x(t[1])})]}),(0,o.jsxs)(c.xu,{sx:{width:"100%",height:"16px",position:"relative",borderRadius:"2px",overflow:"hidden"},children:[(0,o.jsx)(c.xu,{sx:{background:function(){var e=m.colors;if("diverging"===m.type)return"linear-gradient(to right, ".concat(e[0],", ").concat(e[1],", ").concat(e[2],")");var t=e.map((function(t,n){var a=Math.round(n/(e.length-1)*100);return"".concat(t," ").concat(a,"%")})).join(", ");return"linear-gradient(to right, ".concat(t,")")}(),width:"100%",height:"100%"}}),"diverging"===m.type&&(0,o.jsx)(c.xu,{sx:{position:"absolute",top:0,left:"50%",transform:"translateX(-50%)",width:"1px",height:"100%",bg:"text",opacity:.5}})]}),"diverging"===m.type&&(0,o.jsx)(c.xv,{sx:{position:"absolute",bottom:"-4px",left:"50%",transform:"translateX(-50%)",fontSize:"10px",color:"text"},children:"0"})]})},F=function(){var e=(0,l.B7)().theme,t=(0,y.useRouter)(),n=(0,s.useState)(!1),r=n[0],m=n[1],h=(0,s.useState)(!0),f=h[0],g=h[1],b=(0,s.useState)(!1),S=b[0],F=b[1],I=(0,s.useState)(1),k=I[0],E=I[1],U=(0,s.useState)([-1,1]),z=U[0],R=U[1],N=(0,s.useState)(1),H=N[0],P=N[1],A=(0,s.useState)(1),Z=A[0],O=A[1],W=(0,s.useState)("rainbow"),B=W[0],L=W[1],q=(0,x.$m)(B),V=(0,x.$m)("wind"),Y=(0,x.$m)("redteal"),X=(0,s.useState)(!1),$=X[0],G=X[1],J=(0,s.useState)({loading:!0}),K=J[0],Q=J[1],ee=(0,s.useState)(!0),te=ee[0],ne=ee[1],ae=(0,s.useState)(D.TMS_DIFFERENCE),re=ae[0],ie=ae[1],oe=re===D.TMS_DIFFERENCE,se=re===D.TMS_INCLUDED,le=re===D.TMS_DENIED,ce=(0,s.useState)("2025"),ue=ce[0],de=ce[1],xe=(0,s.useState)("05"),me=xe[0],he=xe[1],pe=(0,s.useState)("12"),fe=pe[0],ge=pe[1],be=(0,s.useState)("16"),Se=be[0],ve=be[1],we=(0,s.useState)("40"),ye=we[0],je=we[1],De=(0,s.useState)(""),Ce=(De[0],De[1]),_e=(0,s.useState)(!1),Te=_e[0],Me=_e[1],Fe=(0,s.useState)(0),Ie=Fe[0],ke=Fe[1],Ee=(0,s.useState)(null),Ue=Ee[0],ze=Ee[1],Re=(0,s.useState)(null),Ne=(Re[0],Re[1]),He=(0,s.useRef)(null),Pe=(0,s.useState)(12),Ae=Pe[0],Ze=Pe[1],Oe=(0,s.useState)(1500),We=Oe[0],Be=Oe[1],Le=(0,s.useState)(!1),qe=Le[0],Ve=(Le[1],(0,s.useState)(!1)),Ye=Ve[0],Xe=(Ve[1],(0,s.useState)([])),$e=Xe[0],Ge=Xe[1],Je=(0,s.useState)(0),Ke=Je[0],Qe=Je[1],et=(0,s.useState)(!1),tt=et[0],nt=et[1],at=(0,s.useState)(!1),rt=at[0],it=at[1],ot=(0,s.useRef)(new Set),st=((0,s.useRef)(""),(0,s.useState)(0));st[0],st[1];(0,s.useEffect)((function(){if(t&&t.isReady){var e=t.query,n=e.start,a=e.end;if(n||a){var r=T(n),i=T(a);console.log("URL Parameters - Start:",r,"End:",i);var o=new Date;o.setUTCHours(o.getUTCHours()-14),C(o);var s=new Date(o);s.setUTCHours(s.getUTCHours()+11);var l=r||o,c=i||(r?new Date(new Date(r).setUTCHours(r.getUTCHours()+11)):s),u=Math.max(1,Math.round((c-l)/36e5));Ze(u+1),ze(l),Ne(c),de(String(l.getUTCFullYear())),he(String(l.getUTCMonth()+1).padStart(2,"0")),ge(String(l.getUTCDate()).padStart(2,"0")),ve(String(l.getUTCHours()).padStart(2,"0")),je("00")}}}),[null===t||void 0===t?void 0:t.isReady,null===t||void 0===t?void 0:t.query]);(0,s.useMemo)((function(){var e=String(me).padStart(2,"0"),t=String(fe).padStart(2,"0"),n=String(Se).padStart(2,"0"),a=String(ye).padStart(2,"0");return _(ue,e,t,n,a)}),[ue,me,fe,Se,ye]);var lt=(0,s.useCallback)((0,a.Z)((function(){var e,t,n,r,o,s,l,c;return(0,i.__generator)(this,(function(u){switch(u.label){case 0:if(!Ue||rt)return[2];it(!0),Qe(0),e=[],t=new Set,n=Array.from({length:Ae},function(){var e=(0,a.Z)((function(e,n){var a,r,o,s,l,c,u,d;return(0,i.__generator)(this,(function(e){switch(e.label){case 0:(a=new Date(Ue)).setUTCHours(a.getUTCHours()+n),C(a),r=String(a.getUTCFullYear()),o=String(a.getUTCMonth()+1).padStart(2,"0"),s=String(a.getUTCDate()).padStart(2,"0"),l=String(a.getUTCHours()).padStart(2,"0"),u=_(r,o,s,l,c="00"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(u+"/.zmetadata",{method:"HEAD"})];case 2:if(!e.sent().ok)throw new Error("Data not available for frame ".concat(n));return[2,{index:n,url:u,year:r,month:o,day:s,hour:l,minute:c}];case 3:return d=e.sent(),console.warn("Error loading frame ".concat(n,":"),d),t.add(n),[2,null];case 4:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}()),r=3,o=0,u.label=1;case 1:return o<Ae?(s=n.slice(o,o+r),[4,Promise.all(s)]):[3,4];case 2:u.sent().filter(Boolean).forEach((function(t){e[t.index]=t})),Qe(Math.min(100,Math.round((o+s.length)/Ae*100))),u.label=3;case 3:return o+=r,[3,1];case 4:return ot.current=t,l=e.filter(Boolean),Ge(l),nt(!0),it(!1),l.length>0&&(c=l.find((function(e){return 0===e.index}))||l[0],de(c.year),he(c.month),ge(c.day),ve(c.hour),je(c.minute),Ce(c.url),ke(c.index)),[2]}}))})),[Ue,Ae,rt]);(0,s.useEffect)((function(){!Ue||tt||rt||lt()}),[Ue,lt,tt,rt]),(0,s.useEffect)((function(){return Te&&tt&&$e.length>0?He.current=setTimeout((function(){for(var e=(Ie+1)%Ae,t=0;!$e.some((function(t){return t.index===e}))&&t<Ae;)e=(e+1)%Ae,t++;if(t>=Ae)return console.warn("No valid frames found. Stopping animation."),void Me(!1);ke(e)}),We):He.current&&clearTimeout(He.current),function(){He.current&&clearTimeout(He.current)}}),[Te,Ie,We,tt,$e,Ae]),(0,s.useEffect)((function(){if(r&&!Ue&&t.isReady&&!t.query.start&&!t.query.end){var e=new Date;e.setUTCHours(e.getUTCHours()-14);var n=C(e);de(String(n.getUTCFullYear())),he(String(n.getUTCMonth()+1).padStart(2,"0")),ge(String(n.getUTCDate()).padStart(2,"0")),ve(String(n.getUTCHours()).padStart(2,"0")),je("00");var a=setTimeout((function(){ze(n),ke(0)}),1e3);return function(){return clearTimeout(a)}}}),[r,Ue,t.isReady,t.query.start,t.query.end]),(0,s.useEffect)((function(){tt&&!Te&&$e.length>0&&Me(!0)}),[tt,Te,$e]);var ct={display:f,debug:S,opacity:k,clim:z,month:H,band:Z,colormapName:B,showSwath:te,showTMSDataDenialDifference:oe,showTMSIncluded:se,showTMSDenied:le,year:ue,dateMonth:me,day:fe,hour:Se,minute:ye,isPlaying:Te,currentFrame:Ie,viewMode:re,VIEW_MODES:D,animationSpeed:We},ut={setDisplay:g,setDebug:F,setOpacity:E,setClim:R,setMonth:P,setBand:O,setColormapName:L,setShowSwath:ne,setViewMode:ie,setYear:de,setDateMonth:he,setDay:ge,setHour:ve,setMinute:function(e){je(e)},setIsPlaying:Me,setCurrentFrame:ke,setAnimationBaseDate:ze,resetAnimation:function(){Te&&(Me(!1),ke(0),He.current&&clearTimeout(He.current))},setAnimationSpeed:Be};return r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.h_,{card:"https://images.carbonplan.org/social/maps-demo.png",description:"Demo of our library for making interactive multi-dimensional data-driven web maps.",title:"CHIMP TMS Data Denial"}),(0,o.jsxs)(c.xu,{sx:{position:"absolute",top:0,bottom:0,width:"100%"},children:[(0,o.jsxs)(d.D5,{zoom:2,center:[-100,0],debug:S,children:[(0,o.jsx)(d.de,{color:"#0000FF80",source:j+"basemaps/ocean",variable:"ocean"}),(0,o.jsx)(d.x1,{color:e.rawColors.primary,source:j+"basemaps/land",variable:"land"}),$&&(0,o.jsx)(d.H6,{color:e.colors.primary,backgroundColor:e.colors.background,fontFamily:e.fonts.mono,fontSize:"14px",maxRadius:2e3}),$e.map((function(e){return oe&&(0,o.jsx)(d.nS,{colormap:Y,clim:z,display:f&&Ie===e.index,opacity:.75,fillValue:-9999,mode:"texture",source:e.url,variable:"precip_rate",selector:{tms_denial_flag:[0,1]},regionOptions:{setData:Ie===e.index?Q:null},frag:"\n                  // compute signed difference\n                  float diff = tms_denial_flag_0 - tms_denial_flag_1;\n                \n                  // pick symmetric bounds around zero\n                  float maxAbs = max(abs(clim.x), abs(clim.y));\n                  float low  = -maxAbs;\n                  float high =  maxAbs;\n\n                  // normalize diff into [0,1], so that diff==low \u2192 0.0, diff==0 \u2192 0.5, diff==high \u2192 1.0\n                  float t = (diff - low) / (high - low);\n                \n                  // sample a diverging colormap texture (e.g. reds \u2194 blues)\n                  vec4 c = texture2D(colormap, vec2(t, 1.0));\n                \n                  // output with opacity and premultiplied alpha\n                  gl_FragColor = vec4(c.rgb, opacity);\n                  gl_FragColor.rgb *= gl_FragColor.a;\n                ",zindex:oe?1:0},"".concat(e.url,"-diff"))})),$e.map((function(e){return te&&(0,o.jsx)(d.nS,{colormap:V,fillValue:-9999,clim:[0,.5],display:f&&te&&Ie===e.index,opacity:.4,mode:"texture",source:e.url,variable:"tms_swath",selector:{tms_denial_flag:[0]},regionOptions:{setData:Ie===e.index?Q:null},zindex:oe?2:1},"".concat(e.url,"-swath"))})),$e.map((function(e){return le&&(0,o.jsx)(d.nS,{colormap:q,fillValue:-9999,clim:[0,10],display:f&&le&&Ie===e.index,opacity:.75*k,mode:"texture",source:e.url,variable:"precip_rate",selector:{tms_denial_flag:[1]},regionOptions:{setData:Ie===e.index?Q:null}},"".concat(e.url,"-denied"))})),$e.map((function(e){return se&&(0,o.jsx)(d.nS,{colormap:q,fillValue:-9999,clim:[0,10],display:f&&se&&Ie===e.index,opacity:.75*k,mode:"texture",source:e.url,variable:"precip_rate",selector:{tms_denial_flag:[0]},regionOptions:{setData:Ie===e.index?Q:null}},"".concat(e.url,"-included"))})),(0,o.jsx)(p,{band:Z,regionData:K,showRegionPicker:$,setShowRegionPicker:G})]}),tt&&oe&&(0,o.jsx)(M,{colormap:Y,clim:z,label:"TMS Data Denial Difference",units:"mm/hr",type:"diverging"}),tt&&se&&(0,o.jsx)(M,{colormap:q,clim:[0,10],label:"TMS Included",units:"mm/hr",sx:{bottom:oe?160:80}}),tt&&le&&(0,o.jsx)(M,{colormap:q,clim:[0,10],label:"TMS Denied",units:"mm/hr",sx:{bottom:oe&&se?240:oe||se?160:80}}),rt&&(0,o.jsxs)(c.xu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"background",color:"text",p:4,borderRadius:"small",width:"300px",textAlign:"center",zIndex:1e3,boxShadow:"0 0 20px rgba(0,0,0,0.2)"},children:[(0,o.jsx)(c.xv,{sx:{fontSize:3,fontWeight:"bold",mb:3},children:"Preloading Data Frames"}),(0,o.jsx)(c.xu,{sx:{width:"100%",height:"12px",bg:"muted",borderRadius:"small",overflow:"hidden"},children:(0,o.jsx)(c.xu,{sx:{width:"".concat(Ke,"%"),height:"100%",bg:"primary",transition:"width 0.3s ease-in-out"}})}),(0,o.jsxs)(c.xv,{sx:{mt:2},children:[Ke,"% Complete"]}),(0,o.jsx)(c.xv,{sx:{mt:2,fontSize:1,opacity:.8},children:"This will enable smoother animation playback"})]}),qe&&(0,o.jsxs)(c.xu,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bg:"rgba(0,0,0,0.7)",color:"white",p:3,borderRadius:"small",maxWidth:"80%",textAlign:"center",zIndex:1e3},children:[(0,o.jsxs)(c.xv,{sx:{fontSize:3,fontWeight:"bold"},children:["Data not available for ",ue,"-",me,"-",fe," ",Se,":",ye," UTC"]}),(0,o.jsx)(c.xv,{sx:{mt:2},children:Te?"Skipping to next frame...":"Please try another time."})]}),Ye&&!rt&&(0,o.jsx)(c.xu,{sx:{position:"absolute",top:10,right:10,bg:"primary",color:"background",p:2,borderRadius:"small",zIndex:1e3},children:(0,o.jsxs)(c.xv,{children:["Loading data for ",Se,":",ye," UTC..."]})}),tt&&Te&&(0,o.jsx)(c.xu,{sx:{position:"absolute",bottom:10,right:10,bg:"background",color:"text",p:2,borderRadius:"small",zIndex:900,opacity:.8},children:(0,o.jsx)(c.xv,{children:function(){var e=$e.find((function(e){return e.index===Ie}));return e?"Frame ".concat(Ie+1,"/").concat($e.length," \u2022 ").concat(e.year,"-").concat(e.month,"-").concat(e.day," ").concat(e.hour,":").concat(e.minute," UTC"):"Frame ".concat(Ie+1,"/").concat($e.length)}()})}),(0,o.jsx)(v,{getters:ct,setters:ut}),(0,o.jsx)(u.Pz,{sx:{display:["initial","initial","initial","initial"],position:"absolute",color:"primary",right:[13],bottom:[17,17,15,15]}})]})]}):(0,o.jsx)(w,{onLogin:function(e){"chimp"===e&&m(!0)}})}}},function(e){e.O(0,[715,511,634,608,938,774,888,179],(function(){return t=5557,e(e.s=t);var t}));var t=e.O();_N_E=t}]);